---
title: Multitenancy and tenant tokens — Meilisearch documentation
description: Use tenant tokens to manage complex applications with many users handling sensitive data.
---

# Tenant token payload reference

Meilisearch's tenant tokens are JWTs. Their payload is made of three elements: [search rules](#search-rules), an [API key](#api-key) and its UUID, and an optional [expiration date](#expiry-date).

<CodeSamples id="tenant_token_guide_generate_sdk_1" />

## Search rules

The search rules object are a set of instructions defining search parameters Meilisearch will enforced in every query made with a specific tenant token.

### Search rules object

`searchRules` must contain a JSON object specifying rules that will be enforced on any queries using this token. Each rule is itself a JSON object and must follow this pattern:

```json
{
  "[index_name]": {
    "[search_parameter]": "[value]"
  }
}
```

The object key must be an index name. A single token may include different rules for specific indexes. You may use the `*` wildcard instead of a specific index name—in this case, search rules will be applied to all indexes.

The object value must consist of `search_parameter:value` pairs. **Tenant tokens only support the `filter` [search parameter](/reference/api/search#filter)**.

### Search rule with a single filter

In this example, the user may only query a single index, `medical_records`. They will only receive documents whose `user_id` equals `1`:

```json
{
  "medical_records": {
    "filter": "user_id = 1"
  }
}
```

### Search rule with multiple filters

In this example, the user may only query a single index, `medical_records`. They will only receive documents whose `user_id` equals `1` and whose `published` field is `true`:

```json
{
  "medical_records": {
    "filter": "user_id = 1 AND published = true"
  }
}
```

### Target multiple indexes with partial wildcard

You can use the `*` wildcard by adding it at the end of a string. This allows the tenant token to access all index names starting with that string.

The following example queries across all indexes starting with the string `medical`. This includes indexes such as `medical_records` and `medical_patents`:

```json
{
  "medical*": {
    "filter": "user_id = 1"
  }
}
```

### Target all indexes with a wildcard

You can use the `*` wildcard instead of an index name. This will apply the search rule to all indexes:

```json
{
  "*": {
    "filter": "user_id = 1"
  }
}
```

### Target multiple indexes manually

Manually target each index or group of indexes if you need to set different search rules depending on the index:

```json
{
  "*": {
    "filter": "user_id = 1"
  },
  "medical_records": {
    "filter": "user_id = 1 AND published = true",
  }
}
```

A token may contain rules for any number of indexes. **Specific rulesets take precedence and overwrite `*` rules.**

<Capsule intent="danger">
Because tenant tokens are generated in your application, Meilisearch cannot check if search rule filters are valid. Invalid search rules return throw errors when searching.

Consult the search API reference for [more information on Meilisearch filter syntax](/reference/api/search#filter).
</Capsule>

## API key

Creating a token requires an API key with access to [the search action](/reference/api/keys#actions). A token has access to the same indexes and routes as the API key used to generate it.

Since a master key is not an API key, **you cannot use a master key to create a tenant token**.

For security reasons, we strongly recommend you avoid exposing the API key whenever possible and **always generate tokens on your application's back-end**.

When using an official Meilisearch SDK, you may indicate which API key you wish to use when generating a token. Consult the documentation of the SDK you are using for more specific instructions.

<Capsule intent="warning">
If an API key expires, any tenant tokens created with it will become invalid. The same applies if the API key is deleted or regenerated due to a changed master key.
</Capsule>

[You can read more about API keys in our dedicated guide.](/learn/security/managing_api_keys)

### API key UUID




## Expiry date

It is good security to define an expiry date when generating a tenant token. Meilisearch recommends setting short token expiry dates to protect your users' data.

The expiry date must be a UNIX timestamp or `null`

A token's expiration date cannot exceed its parent API key's expiration date. For example, if an API key is set to expire on 2022-10-15, a token generated with that API key cannot be set to expire on 2022-10-16.

Setting a token expiry date is optional.

<Capsule intent="danger" intent="Revoking a token without an expirty date">
The only way to revoke a token without an expiry date is to [delete](/reference/api/keys#delete-a-key) its parent API key.

Changing an instance's master key forces Meilisearch to regenerate all API keys and will also render all existing tenant tokens invalid.
</Capsule>
